local assert,ipairs,pairs=assert,ipairs,pairs;local a,b,c=string.format,string.len,string.match;local d,e=debug.getinfo,debug.getlocal;local f,g,h=table.insert,table.remove,table.unpack;local i,j,k,l,m,n,o,p,q,r,s,t;local u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S;p={'first','second','third'}i=function(T,U)for V,W in pairs(U)do T[V]=W end;return T end;j=function(T)local U={}for X,W in ipairs(T)do f(U,W)end;return U end;k=function(T,U)local Y=j(T)for X,W in ipairs(U)do f(Y,W)end;return Y end;l=function(Z)return m(n(Z),Z)end;m=function(_,Z)if _<1 then return Z end;return function(...)local a0={...}if#a0<_ then return m(_-#a0,M(Z,a0))else return Z(...)end end end;n=function(Z)return d(Z,'u').nparams end;o=function()end;q=function(Z,a0)return function(...)return Z(h(k(a0,{...})))end end;r=function(...)local a1={...}local a2=g(a1,1)return function(...)local a3=a2(...)for X,Z in ipairs(a1)do a3=Z(a3)end;return a3 end end;s=function(T)local U={}for a4=#T,1,-1 do f(U,T[a4])end;return U end;t=m(2,not _DEBUG and o or function(a5,...)for a4,a6 in ipairs({...})do local a7=c(a6,'^%[(%a+)%]$')local a8=c(a6,'^%.%.%.(%a+)$')local a9,a3=e(2,a4)local aa=type(a3)local ab,ac;if a7 then ab=a('%s: %s arg must be list',a5,p[a4])ac=ab..a(', got %s',aa)assert(aa=='table',ac)if b(a7)>1 then ab=ab..a(' of %ss',a7)for X,W in ipairs(a3)do aa=type(W)ac=ab..a(', got %s element',aa)assert(aa==a7,ac)end end elseif a8 and b(a8)>1 then ab=a('%s: vararg must be all %ss',a5,a8)local ad=-1;a9,a3=e(2,ad)while a3 do aa=type(a3)ac=ab..a(', got a %s',aa)assert(aa==a8,ac)ad=ad-1;a9,a3=e(2,ad)end elseif b(a6)>1 then ac=a('%s: %s arg must be %s, got %s',a5,p[a4],a6,aa)assert(aa==a6,ac)end end end)u=m(2,function(T,U)t('add','number','number')return T+U end)v=m(2,function(ae,af)t('all','function','[a]')for X,W in ipairs(af)do if not ae(W)then return false end end;return true end)w=m(2,function(ae,af)t('any','function','[a]')for X,W in ipairs(af)do if ae(W)then return true end end;return false end)x=function(...)t('compose','...function')return r(h(s({...})))end;y=m(2,function(T,U)t('concat','[a]','[a]')return k(T,U)end)z=function(Z)t('curry','function')return l(Z)end;A=m(2,function(_,Z)t('curryN','number','function')return m(_,Z)end)C=m(2,function(T,U)return T==U end)D=m(2,function(ag,ah)t('evolve','table','table')local ai={}for aj,a3 in pairs(ah)do local ak=ag[aj]ai[aj]=type(ak)=='function'and ak(a3)or type(ak)=='table'and D(ak,a3)or a3 end;return ai end)B=function(Z)t('flip','function')Z=l(Z)return m(2,function(T,U,...)return Z(U,T,...)end)end;E=function(af)t('head','[a]')return af[1]end;F=function(...)return...end;G=m(3,function(ae,al,am)t('ifElse','function','function','function')return function(...)return ae(...)and al(...)or am(...)end end)H=function(T)t('init','[a]')local U=j(T)g(U)return U end;I=m(2,function(an,T)t('is','string')return type(T)==an end)J=function(af)t('last','[a]')return af[#af]end;K=m(2,function(Z,T)t('map','function','[a]')local U={}for X,W in ipairs(T)do f(U,Z(W))end;return U end)L=m(2,function(T,U)t('multiply','number','number')return T*U end)M=m(2,function(Z,a0)t('partial','function','[a]')return q(Z,a0)end)N=m(2,function(ao,T)t('pick','[string]','table')local U={}for X,aj in ipairs(ao)do U[aj]=T[aj]end;return U end)O=function(...)t('pipe','...function')return r(...)end;P=m(2,function(aj,table)t('prop','string','table')return table[aj]end)Q=m(3,function(Z,ap,af)t('reduce','function','a','[a]')for X,a3 in ipairs(af)do ap=Z(ap,a3)end;return ap end)R=function(T)t('reverse','[a]')return s(T)end;S=function(T)t('tail','[a]')local U=j(T)g(U,1)return U end;local aq={add=u,all=v,any=w,compose=x,concat=y,curry=z,curryN=A,equals=C,evolve=D,flip=B,head=E,identity=F,ifElse=G,init=H,is=I,last=J,map=K,multiply=L,partial=M,pick=N,pipe=O,prop=P,reduce=Q,reverse=R,tail=S}aq.import=function(ar)ar=ar or _G;return i(ar,aq)end;return aq
