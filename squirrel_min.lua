local assert,ipairs,pairs=assert,ipairs,pairs;local a,b,c=string.format,string.len,string.match;local d,e=debug.getinfo,debug.getlocal;local f,g,h=table.insert,table.remove,table.unpack;local i,j,k,l,m,n,o,p,q,r,s,t;local u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T;p={'first','second','third'}i=function(U,V)for W,X in pairs(V)do U[W]=X end;return U end;j=function(U)local V={}for Y,X in ipairs(U)do f(V,X)end;return V end;k=function(U,V)local Z=j(U)for Y,X in ipairs(V)do f(Z,X)end;return Z end;l=function(_)return m(n(_),_)end;m=function(a0,_)if a0<1 then return _ end;return function(...)local a1={...}if#a1<a0 then return m(a0-#a1,M(_,a1))else return _(...)end end end;n=function(_)return d(_,'u').nparams end;o=function()end;q=function(_,a1)return function(...)return _(h(k(a1,{...})))end end;r=function(...)local a2={...}local a3=g(a2,1)return function(...)local a4=a3(...)for Y,_ in ipairs(a2)do a4=_(a4)end;return a4 end end;s=function(U)local V={}for a5=#U,1,-1 do f(V,U[a5])end;return V end;t=m(2,not _DEBUG and o or function(a6,...)for a5,a7 in ipairs({...})do local a8=c(a7,'^%[(%a+)%]$')local a9=c(a7,'^%.%.%.(%a+)$')local aa,a4=e(2,a5)local ab=type(a4)local ac,ad;if a8 then ac=a('%s: %s arg must be list',a6,p[a5])ad=ac..a(', got %s',ab)assert(ab=='table',ad)if b(a8)>1 then ac=ac..a(' of %ss',a8)for Y,X in ipairs(a4)do ab=type(X)ad=ac..a(', got %s element',ab)assert(ab==a8,ad)end end elseif a9 and b(a9)>1 then ac=a('%s: vararg must be all %ss',a6,a9)local ae=-1;aa,a4=e(2,ae)while a4 do ab=type(a4)ad=ac..a(', got a %s',ab)assert(ab==a9,ad)ae=ae-1;aa,a4=e(2,ae)end elseif b(a7)>1 then ad=a('%s: %s arg must be %s, got %s',a6,p[a5],a7,ab)assert(ab==a7,ad)end end end)u=m(2,function(U,V)t('add','number','number')return U+V end)v=m(2,function(af,ag)t('all','function','[a]')for Y,X in ipairs(ag)do if not af(X)then return false end end;return true end)w=m(2,function(af,ag)t('any','function','[a]')for Y,X in ipairs(ag)do if af(X)then return true end end;return false end)x=function(...)t('compose','...function')return r(h(s({...})))end;y=m(2,function(U,V)t('concat','[a]','[a]')return k(U,V)end)z=function(_)t('curry','function')return l(_)end;A=m(2,function(a0,_)t('curryN','number','function')return m(a0,_)end)C=m(2,function(U,V)return U==V end)D=m(2,function(ah,ai)t('evolve','table','table')local aj={}for ak,a4 in pairs(ai)do local al=ah[ak]aj[ak]=type(al)=='function'and al(a4)or type(al)=='table'and D(al,a4)or a4 end;return aj end)B=function(_)t('flip','function')_=l(_)return m(2,function(U,V,...)return _(V,U,...)end)end;E=function(ag)t('head','[a]')return ag[1]end;F=function(...)return...end;G=m(3,function(af,am,an)t('ifElse','function','function','function')return function(...)return af(...)and am(...)or an(...)end end)H=function(U)t('init','[a]')local V=j(U)g(V)return V end;I=m(2,function(ao,U)t('is','string')return type(U)==ao end)J=function(ag)t('last','[a]')return ag[#ag]end;K=m(2,function(_,U)t('map','function','[a]')local V={}for Y,X in ipairs(U)do f(V,_(X))end;return V end)L=m(2,function(U,V)t('multiply','number','number')return U*V end)M=m(2,function(_,a1)t('partial','function','[a]')return q(_,a1)end)N=m(2,function(ap,U)t('pick','[string]','table')local V={}for Y,ak in ipairs(ap)do V[ak]=U[ak]end;return V end)O=function(...)t('pipe','...function')return r(...)end;P=m(2,function(ak,table)t('prop','string','table')return table[ak]end)Q=m(3,function(_,aq,ag)t('reduce','function','a','[a]')for Y,a4 in ipairs(ag)do aq=_(aq,a4)end;return aq end)R=function(U)t('reverse','[a]')return s(U)end;S=function(U)t('tail','[a]')local V=j(U)g(V,1)return V end;T=m(2,function(af,am)t('when','function','function')return function(...)return af(...)and am(...)or...end end)local ar={add=u,all=v,any=w,compose=x,concat=y,curry=z,curryN=A,equals=C,evolve=D,flip=B,head=E,identity=F,ifElse=G,init=H,is=I,last=J,map=K,multiply=L,partial=M,pick=N,pipe=O,prop=P,reduce=Q,reverse=R,tail=S,when=T}ar.import=function(as)as=as or _G;return i(as,ar)end;return ar
