local assert,ipairs,next,pairs=assert,ipairs,next,pairs;local a,b,c=string.format,string.len,string.match;local d,e=debug.getinfo,debug.getlocal;local f,g,h=table.insert,table.remove,table.unpack;local i,j,k,l,m,n,o,p,q,r,s,t,u,v;local w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S;r={'first','second','third'}i=function(T,U)for V,W in pairs(U)do T[V]=W end;return T end;k=function(T)local U={}for V,W in ipairs(T)do f(U,W)end;return U end;l=function(T)local U={}return i(U,T)end;m=function(T,U)local X=k(T)for Y,W in ipairs(U)do f(X,W)end;return X end;n=function(Z)return o(p(Z),Z)end;o=function(_,Z)if _<1 then return Z end;return function(...)local a0={...}if#a0<_ then return o(_-#a0,M(Z,a0))else return Z(...)end end end;p=function(Z)return d(Z,'u').nparams end;q=function()end;s=function(Z,a0)return function(...)return Z(h(m(a0,{...})))end end;t=function(...)local a1={...}local a2=g(a1,1)return function(...)local a3=a2(...)for Y,Z in ipairs(a1)do a3=Z(a3)end;return a3 end end;u=function(T)local U={}for Y=#T,1,-1 do f(U,T[Y])end;return U end;v=o(2,not _DEBUG and q or function(a4,...)for Y,a5 in ipairs({...})do local a6=c(a5,'^%[(%a+)%]$')local a7=c(a5,'^%.%.%.(%a+)$')local a8,a3=e(2,Y)local a9=type(a3)if a6 then local aa=a('%s: %s arg must be list',a4,r[Y])local err=aa..a(', got %s',a9)assert(a9=='table',err)if b(a6)>1 then aa=aa..a(' of %ss',a6)for ab,W in ipairs(a3)do a9=type(W)err=aa..a(', got %s element',a9)assert(a9==a6,err)end end elseif a7 and b(a7)>1 then local aa=a('%s: vararg must be all %ss',a4,a7)local ab=-1;a8,a3=e(2,ab)while a3 do a9=type(a3)err=aa..a(', got a %s',a9)assert(a9==a7,err)ab=ab-1;a8,a3=e(2,ab)end elseif b(a5)>1 then local err=a('%s: %s arg must be %s, got %s',a4,r[Y],a5,a9)assert(a9==a5,err)end end end)w=o(2,function(T,U)v('add','number','number')return T+U end)all=o(2,function(ac,ad)v('all','function','[a]')for Y,W in ipairs(ad)do if not ac(W)then return false end end;return true end)x=o(2,function(ac,ad)v('any','function','[a]')for Y,W in ipairs(ad)do if ac(W)then return true end end;return false end)y=function(...)v('compose','...function')return t(h(u({...})))end;z=o(2,function(T,U)v('concat','[a]','[a]')return m(T,U)end)A=function(Z)v('curry','function')return n(Z)end;B=o(2,function(_,Z)v('curryN','number','function')return o(_,Z)end)D=o(2,function(T,U)return T==U end)E=o(2,function(ae,af)v('evolve','table','table')local ag={}for ah,a3 in pairs(af)do local ai=ae[ah]ag[ah]=type(ai)=='function'and ai(a3)or type(ai)=='table'and E(ai,a3)or a3 end;return ag end)C=function(Z)v('flip','function')Z=n(Z)return o(2,function(T,U,...)return Z(U,T,...)end)end;F=function(ad)v('head','[a]')return ad[1]end;G=function(...)return...end;H=function(T)v('init','[a]')local U=k(T)g(U)return U end;I=o(2,function(aj,T)v('is','string')return type(T)==aj end)J=function(ad)v('last','[a]')return ad[#ad]end;K=o(2,function(Z,T)v('map','function','[a]')local U={}for Y,W in ipairs(T)do f(U,Z(W))end;return U end)L=o(2,function(T,U)v('multiply','number','number')return T*U end)M=o(2,function(Z,a0)v('partial','function','[a]')return s(Z,a0)end)N=o(2,function(ak,T)v('pick','[string]','table')local U={}for Y,ah in ipairs(ak)do U[ah]=T[ah]end;return U end)O=function(...)v('pipe','...function')return t(...)end;P=o(2,function(ah,table)v('prop','string','table')return table[ah]end)Q=o(3,function(Z,al,ad)v('reduce','function','a','[a]')for Y,a3 in ipairs(ad)do al=Z(al,a3)end;return al end)R=function(T)v('reverse','[a]')return u(T)end;S=function(T)v('tail','[a]')local U=k(T)g(U,1)return U end;local am={add=w,any=x,compose=y,concat=z,curry=A,curryN=B,equals=D,evolve=E,flip=C,head=F,identity=G,init=H,is=I,last=J,map=K,multiply=L,partial=M,pick=N,pipe=O,prop=P,reduce=Q,reverse=R,tail=S}am.import=function(an)an=an or _G;return i(an,am)end;return am
