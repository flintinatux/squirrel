local assert,ipairs,next,pairs=assert,ipairs,next,pairs;local a,b,c=string.format,string.len,string.match;local d,e=debug.getinfo,debug.getlocal;local f,g,h=table.insert,table.remove,table.unpack;local i,j,k,l,m,n,o,p,q;local r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N;p={'first','second','third'}i=function(O,P)for Q,R in pairs(P)do O[Q]=R end;return O end;k=function(O)local P={}for Q,R in ipairs(O)do f(P,R)end;return P end;l=function(O)local P={}return i(P,O)end;m=function(S,T)if S<1 then return T end;return function(...)local U={...}if#U<S then return m(S-#U,H(T,U))else return T(...)end end end;n=function(T)return d(T,'u').nparams end;o=function()end;q=m(2,not _DEBUG and o or function(V,...)for W,X in ipairs({...})do local Y=c(X,'^%[(%a+)%]$')local Z=c(X,'^%.%.%.(%a+)$')local _,a0=e(2,W)local a1=type(a0)if Y then local a2=a('%s: %s arg must be list',V,p[W])local err=a2 ..a(', got %s',a1)assert(a1=='table',err)if b(Y)>1 then a2=a2 ..a(' of %ss',Y)for a3,R in ipairs(a0)do a1=type(R)err=a2 ..a(', got %s element',a1)assert(a1==Y,err)end end elseif Z and b(Z)>1 then local a2=a('%s: vararg must be all %ss',V,Z)local a3=-1;_,a0=e(2,a3)while a0 do a1=type(a0)err=a2 ..a(', got a %s',a1)assert(a1==Z,err)a3=a3-1;_,a0=e(2,a3)end elseif b(X)>1 then local err=a('%s: %s arg must be %s, got %s',V,p[W],X,a1)assert(a1==X,err)end end end)r=m(2,function(O,P)q('add','number','number')return O+P end)all=m(2,function(a4,a5)q('all','function','[a]')for W,R in ipairs(a5)do if not a4(R)then return false end end;return true end)s=m(2,function(a4,a5)q('any','function','[a]')for W,R in ipairs(a5)do if a4(R)then return true end end;return false end)t=function(...)q('compose','...function')return J(h(M({...})))end;u=m(2,function(O,P)q('concat','[a]','[a]')local a6=k(O)for W,R in ipairs(P)do f(a6,R)end;return a6 end)v=function(T)q('curry','function')return m(n(T),T)end;w=m(2,function(S,T)q('curryN','number','function')return m(S,T)end)y=m(2,function(O,P)return O==P end)z=m(2,function(a7,a8)q('evolve','table','table')local a9={}for aa,a0 in pairs(a8)do local ab=a7[aa]a9[aa]=type(ab)=='function'and ab(a0)or type(ab)=='table'and z(ab,a0)or a0 end;return a9 end)x=function(T)q('flip','function')T=v(T)return m(2,function(O,P,...)return T(P,O,...)end)end;A=function(a5)q('head','[a]')return a5[1]end;B=function(...)return...end;C=function(O)q('init','[a]')local P=k(O)g(P)return P end;D=m(2,function(ac,O)q('is','string')return type(O)==ac end)E=function(a5)q('last','[a]')return a5[#a5]end;F=m(2,function(T,O)q('map','function','[a]')local P={}for W,R in ipairs(O)do f(P,T(R))end;return P end)G=m(2,function(O,P)q('multiply','number','number')return O*P end)H=m(2,function(T,U)q('partial','function','[a]')return function(...)return T(h(u(U,{...})))end end)I=m(2,function(ad,O)q('pick','[string]','table')local P={}for W,aa in ipairs(ad)do P[aa]=O[aa]end;return P end)J=function(...)q('pipe','...function')local ae={...}local af=g(ae,1)return function(...)local a0=af(...)for W,T in ipairs(ae)do a0=T(a0)end;return a0 end end;K=m(2,function(aa,table)q('prop','string','table')return table[aa]end)L=m(3,function(T,ag,a5)q('reduce','function','a','[a]')for W,a0 in ipairs(a5)do ag=T(ag,a0)end;return ag end)M=function(O)q('reverse','[a]')local P={}for W=#O,1,-1 do f(P,O[W])end;return P end;N=function(O)q('tail','[a]')local P=k(O)g(P,1)return P end;local ah={add=r,any=s,compose=t,concat=u,curry=v,curryN=w,equals=y,evolve=z,flip=x,head=A,identity=B,init=C,is=D,last=E,map=F,multiply=G,partial=H,pick=I,pipe=J,prop=K,reduce=L,reverse=M,tail=N}ah.import=function(ai)ai=ai or _G;return i(ai,ah)end;return ah
